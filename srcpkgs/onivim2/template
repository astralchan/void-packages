# Template file for 'onivim2'
pkgname=onivim2
version=0.5.5
revision=1
wrksrc="oni2-${version}"
hostmakedepends="git nasm m4 ragel yarn curl tar"
makedepends="libpng-devel bzip2-devel xorg-server-devel glu-devel
 harfbuzz-devel libXext-devel fontconfig-devel libXrandr-devel libXi-devel
 libXcursor-devel libXinerama-devel libXxf86vm-devel"
short_desc="Native, lightweight modal code editor"
maintainer="KawaiiAmber <japaneselearning101@gmail.com>"
license="custom:Outrun-Lans-EULA"
homepage="https://v2.onivim.io"
distfiles="https://github.com/onivim/oni2/archive/refs/tags/v${version}.tar.gz"
checksum=a73112c447a6747fc407784d017270a7fd83c13e8b8be9f0ea953316ba2dc76d
# proprietary license
restricted=yes

do_configure() {
	yarn add esy
	yarn add node-gyp
	node-gyp install 14.15.4
	yarn install-node-deps.js
}

do_build() {
	esy install
	esy bootstrap
	esy build
}

do_install() {
	# Not sure how to install yet
	# pass as : to allow testing of build
	:
}

post_install() {
	vlicense Outrun-Labs-EULA-v1.1.md
}
